(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();const h=["TYPESCRIPT","JAVASCRIPT","PROGRAMAR","DESARROLLO","COMPUTADORA","TECLADO","PANTALLA","ALGORITMO","VARIABLE","FUNCION","COMPONENTE","INTERFAZ","MODULO","CLASE","OBJETO","ARREGLO","CADENA","NUMERO","BOOLEANO","METODO","PROPIEDAD","HERENCIA","POLIMORFISMO","ENCAPSULAMIENTO","ABSTRACCION","RECURSION","ITERACION","CONDICIONAL","BUCLE","EVENTO"],p=()=>h[Math.floor(Math.random()*h.length)],m="hangman_game_state",u="hangman_game_stats";class o{static saveGameState(e){try{localStorage.setItem(m,JSON.stringify(e))}catch(t){console.error("Error saving game state:",t)}}static loadGameState(){try{const e=localStorage.getItem(m);return e?JSON.parse(e):null}catch(e){return console.error("Error loading game state:",e),null}}static clearGameState(){try{localStorage.removeItem(m)}catch(e){console.error("Error clearing game state:",e)}}static saveGameStats(e){try{localStorage.setItem(u,JSON.stringify(e))}catch(t){console.error("Error saving game stats:",t)}}static loadGameStats(){try{const e=localStorage.getItem(u);return e?JSON.parse(e):{gamesPlayed:0,gamesWon:0,gamesLost:0,currentStreak:0,maxStreak:0}}catch(e){return console.error("Error loading game stats:",e),{gamesPlayed:0,gamesWon:0,gamesLost:0,currentStreak:0,maxStreak:0}}}}class y{element;constructor(e){this.element=document.createElement("div"),this.element.className="word-display",e.appendChild(this.element)}render(e,t){this.element.innerHTML="";for(const r of e){const s=document.createElement("div");s.className="letter-box",s.textContent=t.includes(r)?r:"",this.element.appendChild(s)}}destroy(){this.element.remove()}}class E{element;onLetterClick;buttons=new Map;constructor(e,t){this.element=document.createElement("div"),this.element.className="keyboard",this.onLetterClick=t,this.createKeyboard(),e.appendChild(this.element)}createKeyboard(){["QWERTYUIOP","ASDFGHJKL","ZXCVBNM"].forEach(t=>{const r=document.createElement("div");r.className="keyboard-row",t.split("").forEach(s=>{const a=document.createElement("button");a.className="key",a.textContent=s,a.dataset.letter=s,a.addEventListener("click",()=>{a.disabled||this.onLetterClick(s)}),this.buttons.set(s,a),r.appendChild(a)}),this.element.appendChild(r)})}disableLetter(e){const t=this.buttons.get(e);t&&(t.disabled=!0)}markCorrect(e){const t=this.buttons.get(e);t&&(t.classList.add("correct"),t.disabled=!0)}markIncorrect(e){const t=this.buttons.get(e);t&&(t.classList.add("incorrect"),t.disabled=!0)}reset(){this.buttons.forEach(e=>{e.disabled=!1,e.classList.remove("correct","incorrect")})}disableAll(){this.buttons.forEach(e=>{e.disabled=!0})}destroy(){this.element.remove()}}class v{element;maxImages;constructor(e,t=6){this.element=document.createElement("img"),this.element.className="hangman-image",this.maxImages=t,this.updateImage(0),e.appendChild(this.element)}updateImage(e){if(e===0)this.element.style.opacity="0",this.element.src="";else{const t=Math.min(e,this.maxImages);this.element.src=`/images/ahorcado${t}.png`,this.element.style.opacity="1",this.element.alt=`Ahorcado - ${t} errores`}}destroy(){this.element.remove()}}class S{element;constructor(e){this.element=document.createElement("div"),this.element.className="stats",e.appendChild(this.element)}render(e){const t=e.gamesPlayed>0?Math.round(e.gamesWon/e.gamesPlayed*100):0;this.element.innerHTML=`
      <div class="stats-grid">
        <div class="stat-item">
          <div class="stat-value">${e.gamesPlayed}</div>
          <div class="stat-label">Jugados</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">${t}%</div>
          <div class="stat-label">Victorias</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">${e.currentStreak}</div>
          <div class="stat-label">Racha</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">${e.maxStreak}</div>
          <div class="stat-label">Mejor Racha</div>
        </div>
      </div>
    `}destroy(){this.element.remove()}}class f{container;state;stats;wordDisplay;keyboard;hangmanImage;statsDisplay;messageElement;newGameButton;constructor(e){this.container=e,this.stats=o.loadGameStats();const t=o.loadGameState();t&&t.gameStatus==="playing"?this.state=t:this.state=this.createNewGameState(),this.init()}createNewGameState(){return{word:p(),guessedLetters:[],incorrectGuesses:0,maxIncorrectGuesses:6,gameStatus:"playing"}}init(){this.container.innerHTML="",this.container.className="game-container";const e=document.createElement("h1");e.textContent="AHORCADO",e.className="game-title",this.container.appendChild(e);const t=document.createElement("div");t.className="content-area",this.container.appendChild(t);const r=document.createElement("div");r.className="top-section",t.appendChild(r);const s=document.createElement("div");s.className="stats-container",r.appendChild(s),this.statsDisplay=new S(s),this.statsDisplay.render(this.stats);const a=document.createElement("div");a.className="image-wrapper",r.appendChild(a);const i=document.createElement("div");i.className="image-container",a.appendChild(i),this.hangmanImage=new v(i,this.state.maxIncorrectGuesses),this.hangmanImage.updateImage(this.state.incorrectGuesses),this.newGameButton=document.createElement("button"),this.newGameButton.textContent="Nuevo Juego",this.newGameButton.className="new-game-button",this.newGameButton.addEventListener("click",()=>this.startNewGame()),a.appendChild(this.newGameButton);const c=document.createElement("div");c.className="main-content",t.appendChild(c),this.messageElement=document.createElement("div"),this.messageElement.className="message",c.appendChild(this.messageElement);const d=document.createElement("div");d.className="word-container",c.appendChild(d),this.wordDisplay=new y(d),this.wordDisplay.render(this.state.word,this.state.guessedLetters);const l=document.createElement("div");l.className="keyboard-container",t.appendChild(l),this.keyboard=new E(l,g=>this.handleLetterGuess(g)),this.state.guessedLetters.length>0&&this.restoreKeyboardState(),this.state.gameStatus!=="playing"&&this.updateGameOver(),this.setupKeyboardListener()}restoreKeyboardState(){this.state.guessedLetters.forEach(e=>{this.state.word.includes(e)?this.keyboard.markCorrect(e):this.keyboard.markIncorrect(e)})}setupKeyboardListener(){const e=t=>{if(this.state.gameStatus!=="playing")return;const r=t.key.toUpperCase();/^[A-Z]$/.test(r)&&!this.state.guessedLetters.includes(r)&&this.handleLetterGuess(r)};document.addEventListener("keydown",e)}handleLetterGuess(e){this.state.gameStatus==="playing"&&(this.state.guessedLetters.includes(e)||(this.state.guessedLetters.push(e),this.state.word.includes(e)?(this.keyboard.markCorrect(e),this.wordDisplay.render(this.state.word,this.state.guessedLetters),this.checkWin()&&(this.state.gameStatus="won",this.updateStats(!0),this.updateGameOver())):(this.keyboard.markIncorrect(e),this.state.incorrectGuesses++,this.hangmanImage.updateImage(this.state.incorrectGuesses),this.state.incorrectGuesses>=this.state.maxIncorrectGuesses&&(this.state.gameStatus="lost",this.updateStats(!1),this.updateGameOver())),o.saveGameState(this.state)))}checkWin(){return this.state.word.split("").every(e=>this.state.guessedLetters.includes(e))}updateStats(e){this.stats.gamesPlayed++,e?(this.stats.gamesWon++,this.stats.currentStreak++,this.stats.currentStreak>this.stats.maxStreak&&(this.stats.maxStreak=this.stats.currentStreak)):(this.stats.gamesLost++,this.stats.currentStreak=0),o.saveGameStats(this.stats),this.statsDisplay.render(this.stats)}updateGameOver(){this.keyboard.disableAll(),this.state.gameStatus==="won"?(this.messageElement.textContent="Â¡Felicitaciones! Has ganado",this.messageElement.className="message win"):this.state.gameStatus==="lost"&&(this.messageElement.textContent=`Perdiste. La palabra era: ${this.state.word}`,this.messageElement.className="message lose",this.wordDisplay.render(this.state.word,this.state.word.split(""))),this.newGameButton.classList.add("highlight")}startNewGame(){this.state=this.createNewGameState(),o.saveGameState(this.state),this.wordDisplay.render(this.state.word,this.state.guessedLetters),this.keyboard.reset(),this.hangmanImage.updateImage(0),this.messageElement.textContent="",this.messageElement.className="message",this.newGameButton.classList.remove("highlight")}destroy(){this.wordDisplay?.destroy(),this.keyboard?.destroy(),this.hangmanImage?.destroy(),this.statsDisplay?.destroy()}}const C=document.querySelector("#app");new f(C);
